import{n as w}from"./router.DnZMHVsn.js";function R(t){const e=b(t),o=new ArrayBuffer(e.length),r=new DataView(o);for(let s=0;s<o.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return o}const _="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function b(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",o=0,r=0;for(let s=0;s<t.length;s++)o<<=6,o|=_.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((o&16711680)>>16),e+=String.fromCharCode((o&65280)>>8),e+=String.fromCharCode(o&255),o=r=0);return r===12?(o>>=4,e+=String.fromCharCode(o)):r===18&&(o>>=2,e+=String.fromCharCode((o&65280)>>8),e+=String.fromCharCode(o&255)),e}const C=-1,U=-2,D=-3,L=-4,P=-5,F=-6;function k(t,e){return v(JSON.parse(t),e)}function v(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const o=t,r=Array(o.length);function s(n,f=!1){if(n===C)return;if(n===D)return NaN;if(n===L)return 1/0;if(n===P)return-1/0;if(n===F)return-0;if(f)throw new Error("Invalid input");if(n in r)return r[n];const a=o[n];if(!a||typeof a!="object")r[n]=a;else if(Array.isArray(a))if(typeof a[0]=="string"){const i=a[0],u=e?.[i];if(u)return r[n]=u(s(a[1]));switch(i){case"Date":r[n]=new Date(a[1]);break;case"Set":const y=new Set;r[n]=y;for(let c=1;c<a.length;c+=1)y.add(s(a[c]));break;case"Map":const A=new Map;r[n]=A;for(let c=1;c<a.length;c+=2)A.set(s(a[c]),s(a[c+1]));break;case"RegExp":r[n]=new RegExp(a[1],a[2]);break;case"Object":r[n]=Object(a[1]);break;case"BigInt":r[n]=BigInt(a[1]);break;case"null":const h=Object.create(null);r[n]=h;for(let c=1;c<a.length;c+=2)h[a[c]]=s(a[c+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const c=globalThis[i],E=a[1],O=R(E),m=new c(O);r[n]=m;break}case"ArrayBuffer":{const c=a[1],E=R(c);r[n]=E;break}default:throw new Error(`Unknown type ${i}`)}}else{const i=new Array(a.length);r[n]=i;for(let u=0;u<a.length;u+=1){const y=a[u];y!==U&&(i[u]=s(y))}}else{const i={};r[n]=i;for(const u in a){const y=a[u];i[u]=s(y)}}return r[n]}return s(0)}function B(t){return t.endsWith("/")?t:t+"/"}const d={actionName:"_action"},$=d,j=B,N={BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,TIMEOUT:405,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500},M=Object.entries(N).reduce((t,[e,o])=>({...t,[o]:e}),{});class l extends Error{type="AstroActionError";code="INTERNAL_SERVER_ERROR";status=500;constructor(e){super(e.message),this.code=e.code,this.status=l.codeToStatus(e.code),e.stack&&(this.stack=e.stack)}static codeToStatus(e){return N[e]}static statusToCode(e){return M[e]??"INTERNAL_SERVER_ERROR"}static fromJson(e){return Q(e)?new Y(e.issues):V(e)?new l(e):new l({code:"INTERNAL_SERVER_ERROR"})}}function V(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="AstroActionError"}function Q(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="AstroActionInputError"&&"issues"in t&&Array.isArray(t.issues)}class Y extends l{type="AstroActionInputError";issues;fields;constructor(e){super({message:`Failed to validate: ${JSON.stringify(e,null,2)}`,code:"BAD_REQUEST"}),this.issues=e,this.fields={};for(const o of e)if(o.path.length>0){const r=o.path[0].toString();this.fields[r]??=[],this.fields[r]?.push(o.message)}}}function T(t){return`?${new URLSearchParams({[d.actionName]:t}).toString()}`}function S(t){if(t.type==="error"){let e;try{e=JSON.parse(t.body)}catch{return{data:void 0,error:new l({message:t.body,code:"INTERNAL_SERVER_ERROR"})}}return{error:l.fromJson(e),data:void 0}}return t.type==="empty"?{data:void 0,error:void 0}:{data:k(t.body,{URL:e=>new URL(e)}),error:void 0}}const J="%2E";function I(t={},e=""){return new Proxy(t,{get(o,r){if(r in o||typeof r=="symbol")return o[r];const s=e+encodeURIComponent(r.toString()).replaceAll(".",J);function n(f){return g(f,s)}return Object.assign(n,{queryString:T(s),toString:()=>n.queryString,$$FORM_ACTION:function(){return{method:"POST",name:"_astroAction",action:"?"+new URLSearchParams(n.toString()).toString()}},async orThrow(f){const{data:a,error:i}=await g(f,s);if(i)throw i;return a}}),I(n,s+".")}})}function q(t){let e=`${"/".replace(/\/$/,"")}/_actions/${new URLSearchParams(t.toString()).get($.actionName)}`;return e=j(e),e}async function g(t,e,o){const r=new Headers;r.set("Accept","application/json");let s=t;if(!(s instanceof FormData)){try{s=JSON.stringify(t)}catch(f){throw new l({code:"BAD_REQUEST",message:`Failed to serialize request body to JSON. Full error: ${f.message}`})}s?r.set("Content-Type","application/json"):r.set("Content-Length","0")}const n=await fetch(q({toString(){return T(e)}}),{method:"POST",body:s,headers:r});return n.status===204?S({type:"empty",status:204}):S({type:n.ok?"data":"error",body:await n.text()})}const G=I(),p=document.querySelector("form");document.querySelector("#form-error");p?.addEventListener("submit",async t=>{t.preventDefault();const e=new FormData(p),{error:o}=await G.sendEmail(e);o||await w("/")});
